<mat-sidenav-container class="sidenav-container">
  <mat-sidenav #drawer class="sidenav" fixedInViewport mode="over">
    <mat-toolbar class="sidenav-toolbar">
      <mat-icon class="menu-icon">menu</mat-icon>
      <span>Menú</span>
    </mat-toolbar>
    <mat-nav-list class="nav-list">
      <a mat-list-item (click)="navigateTo('/dashboard')" [class.active]="isActiveRoute('/dashboard')" class="nav-item">
        <mat-icon matListItemIcon class="nav-icon">dashboard</mat-icon>
        <span matListItemTitle>Dashboard</span>
      </a>
      <a mat-list-item (click)="navigateTo('/clients')" [class.active]="isActiveRoute('/clients')" class="nav-item">
        <mat-icon matListItemIcon class="nav-icon">people</mat-icon>
        <span matListItemTitle>Clientes</span>
      </a>
      <a mat-list-item (click)="navigateTo('/products')" [class.active]="isActiveRoute('/products')" class="nav-item">
        <mat-icon matListItemIcon class="nav-icon">inventory</mat-icon>
        <span matListItemTitle>Productos</span>
      </a>
    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-toolbar class="main-toolbar">
      <button type="button" aria-label="Toggle sidenav" mat-icon-button (click)="drawer.toggle()" class="menu-button">
        <mat-icon aria-label="Side nav toggle icon">menu</mat-icon>
      </button>
      <span class="toolbar-title">Financia App - Clientes</span>
      <span class="spacer"></span>
      <span *ngIf="currentUser" class="user-info">Hola, {{ currentUser.email }}</span>
      <button mat-icon-button [matMenuTriggerFor]="menu" class="user-menu-button">
        <mat-icon>account_circle</mat-icon>
      </button>
      <mat-menu #menu="matMenu" class="user-menu">
        <button mat-menu-item (click)="logout()" class="menu-item">
          <mat-icon>logout</mat-icon>
          <span>Cerrar Sesión</span>
        </button>
      </mat-menu>
    </mat-toolbar>

    <div class="content">
      <div class="header-section">
        <h1 class="page-title">
          <mat-icon class="title-icon">people</mat-icon>
          Gestión de Clientes
        </h1>
        <p class="page-subtitle">Administra y visualiza todos los clientes registrados</p>
      </div>

      <div class="actions-section">
        <button mat-raised-button color="primary" (click)="navigateToCreateClient()" class="create-button">
          <mat-icon>add</mat-icon>
          Nuevo Cliente
        </button>
      </div>

      <div class="table-container">
        <div *ngIf="isLoading" class="loading-container">
          <mat-spinner class="loading-spinner"></mat-spinner>
          <p class="loading-text">Cargando clientes...</p>
        </div>

        <div *ngIf="!isLoading && clients.length === 0" class="empty-state">
          <mat-icon class="empty-icon">people_outline</mat-icon>
          <h3>No hay clientes registrados</h3>
          <p>Comienza agregando tu primer cliente</p>
          <button mat-raised-button color="primary" (click)="navigateToCreateClient()" class="empty-action-button">
            <mat-icon>add</mat-icon>
            Crear Cliente
          </button>
        </div>

        <table *ngIf="!isLoading && clients.length > 0" mat-table [dataSource]="clients" class="client-table">
          <ng-container matColumnDef="full_name">
            <th mat-header-cell *matHeaderCellDef class="table-header">Nombre</th>
            <td mat-cell *matCellDef="let client" class="table-cell">{{ client.full_name }}</td>
          </ng-container>

          <ng-container matColumnDef="full_last_name">
            <th mat-header-cell *matHeaderCellDef class="table-header">Apellido</th>
            <td mat-cell *matCellDef="let client" class="table-cell">{{ client.full_last_name }}</td>
          </ng-container>

          <ng-container matColumnDef="type_document">
            <th mat-header-cell *matHeaderCellDef class="table-header">Tipo Doc.</th>
            <td mat-cell *matCellDef="let client" class="table-cell">
              <span class="document-chip">{{ client.type_document }}</span>
            </td>
          </ng-container>

          <ng-container matColumnDef="number_document">
            <th mat-header-cell *matHeaderCellDef class="table-header">Número Doc.</th>
            <td mat-cell *matCellDef="let client" class="table-cell">{{ client.number_document }}</td>
          </ng-container>

          <ng-container matColumnDef="uniqueCode">
            <th mat-header-cell *matHeaderCellDef class="table-header">Código Único</th>
            <td mat-cell *matCellDef="let client" class="table-cell">
              <span class="code-chip">{{ client.uniqueCode }}</span>
            </td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef class="table-header">Acciones</th>
            <td mat-cell *matCellDef="let client" class="table-cell">
              <div class="action-buttons">
                <button mat-icon-button color="accent" (click)="viewClientDetails(client.uniqueCode)" class="action-button details-button" matTooltip="Ver Detalles">
                  <mat-icon>visibility</mat-icon>
                </button>
                <button mat-icon-button color="primary" (click)="viewClientProducts(client.uniqueCode)" class="action-button products-button" matTooltip="Ver Productos">
                  <mat-icon>inventory</mat-icon>
                </button>
                <button mat-icon-button color="warn" (click)="deleteClient(client)" class="action-button delete-button" matTooltip="Eliminar Cliente">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns" class="table-header-row"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></tr>
        </table>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
